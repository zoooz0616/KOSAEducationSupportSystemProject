<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link th:href="@{/css/student/header.css}" rel="stylesheet">
<link th:href="@{/css/student/footer.css}" rel="stylesheet">
<link th:href="@{/css/student/main.css}" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link rel="icon" href="/img/icon.png" />
<meta charset="UTF-8">
<title>main page</title>
</head>
<body>
	<div th:replace="~{/include/student_header :: header}"
		style="width: 100%;"></div>
	<div class="banner">
		<div class="img-list">
			<div class="imgs img1">
				<div class="bannertext">
					<h2 style="font-size: 30px;">KOSA 교육 지원 시스템</h2>
					<h1 style="font-size: 40px;">새로운 교육을 통해서 더 나은 내일로</h1>
				</div>
			</div>
			<div class="imgs img2">
				<div class="bannertext">
					<h2 style="font-size: 30px;">KOSA 교육지원 시스템을 통해서 여러 교육을 만나보세요.</h2>
				</div>
			</div>
		</div>
	</div>

	<div class="container" style="margin-top: -7%;">
		<div class="button-list">
			<button class="button-left" style="margin-right: 1%;"></button>
			<button class="button-right"></button>
		</div>
		<div class="maincontent">
			<div class="login con" style="margin-bottom: 4%; padding: 3%;">
				<div th:if="${session.userEmail==null}">
					<h2>회원가입후 이용가능</h2>
				</div>
				<div th:if="${session.userEmail!=null}" style="text-align: left;">
					<div style="width: 100%;">
						<h2 style="margin-bottom: 2%; padding: 5% 0;">
							<span th:text="${session.stdtNm}"
								style="color: #0E5881; font-size: 22px;"></span>님 환영합니다!
						</h2>
						<div class="my" style="text-align: left;">
							<div class="box">
								<a th:href="@{/student/mypage}"> <span>지원내역: </span> <span
									style="color: #0E5881; font-size: 22px;"
									th:text="${aplyClassCnt}"></span> <span>건</span></a>
							</div>
							<div class="box">
								<a th:href="@{/student/mypage}"> <span>출력 가능
										이수증: </span> <span style="color: #0E5881; font-size: 22px;"
									th:text="${cmptClassCnt}"></span> <span>건</span></a>
							</div>
						</div>
						<div class="lastlog">
							<h4>마지막 로그인 일시</h4>
							<h4 th:text="${lastLogTime}"></h4>
						</div>
					</div>
				</div>
			</div>
			<div class="login con"
				style="margin-bottom: 4%; text-align: center; padding: 3%;">
				<div th:if="${session.userEmail==null}">
					<form th:action="@{/login}" method="post" class="">
						<div class="">
							<label for="email"></label> <input style="width: 50%;"
								type="text" name="email" id="id" class="" placeholder="아이디(이메일)">
						</div>
						<div class="">
							<label for="pwd"></label> <input style="width: 50%;"
								type="password" name="pwd" id="pwd" class=" " placeholder="비밀번호">
						</div>
						<div class="submit">
							<input style="width: 50%;" type="submit" class="loginBtn"
								th:value="로그인">
						</div>
					</form>
				</div>
				<div th:if="${session.userEmail!=null}">
					<div th:if="${ingClassVO == null}">
						<h3>수강중인 교육이 없습니다.</h3>
						<div
							style="align-items: center; justify-content: center; display: flex;">
							<a th:href="@{/student/class}"><img style="height: 70px;"
								th:src="@{/img/hat_navy.png}">
								<h3>교육지원하러 가기</h3> </a>
						</div>
					</div>
					<div th:if="${ingClassVO != null}">
						<div class="inouttm">
							<h3 th:text="${ingClassVO.clssNm}" style="margin: 0 0 2% 0;"></h3>
							<div class="viewinout"
								style="display: flex; justify-content: space-around;">
								<div>
									<label for="intm"></label><span>출근 시간</span> <input type="text"
										name="intm" id="intm" class="checktm" readonly>
								</div>
								<div>
									<label for="outtm"></label><span>퇴근 시간</span> <input
										type="text" name="outtm" id="outtm" class="checktm" readonly>
								</div>
							</div>
						</div>
						<div class="submit"
							style="margin: auto; display: grid; align-items: center;">
							<!-- 토글 버튼 -->
							<input class="wlogBtn" type="button" onclick="toggleInOut()">
						</div>
					</div>
				</div>
			</div>
			<div class="class con" style="width: 45%;">
				<h2 style="margin-bottom: 0;">접수중인 교육</h2>
				<a class="plus" style="display: block; text-align: end;"
					th:href="@{/student/class}">+</a>
				<hr>
				<table>
					<tr th:each="classVO : ${classList}">
						<td style="width: 70%;"><a
							th:href="@{/student/class/__${classVO.clssId}__}"
							th:text="${classVO.clssNm}"></a></td>
						<td style="width: 30%; text-align: right;"
							th:text="${classVO.aplyStartDd} +' ~ '+ ${classVO.aplyEndDd}"></td>
					</tr>
				</table>
			</div>
			<div class="notice con" style="background: #E7EFF3; width: 40%;">
				<h2 style="margin-bottom: 0;">공지사항</h2>
				<a class="plus" style="display: block; text-align: end;"
					th:href="@{/student/notice}">+</a>
				<hr>
				<table>
					<tr th:each="postVO : ${postList}">
						<td style="width: 75%;"><a
							th:href="@{notice/__${postVO.postId}__}"
							th:text="${postVO.postTitle}"></a></td>
						<td style="width: 25%; text-align: right;"
							th:text="${postVO.rgstDd}"></td>
					</tr>
				</table>
			</div>
		</div>
	</div>
	<div th:replace="~{/include/student_footer :: footer}"
		style="width: 100%;"></div>
	<script th:inline="javascript">
		/* 스크립트 내에서 Thymeleaf 변수를 선언하고 값 할당 */
		var clssId = /*[[${ingClassVO?.clssId}]]*/'';
		var lastVO = /*[[${lastWlogVO}]]*/'';
		console.log(lastVO);
		var lastInTm = /*[[${lastWlogVO?.inTm}]]*/'';
		var lastOutTm = /*[[${lastWlogVO?.outTm}]]*/'';

		console.log(lastInTm + lastOutTm);
	</script>
	<script src="/js/student/main.js"></script>

</body>
</html>