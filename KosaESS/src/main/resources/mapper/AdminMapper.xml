<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.finalprj.kess.repository.IAdminRepository">
	<select id="getWaitInquiryCnt" resultType="int">
	<![CDATA[
		select count(post_id) as "waitInquiryCnt"
		from post
		where post_cd=
		(select tpcd_id||cmcd_id
		from cmcd
		where cmcd_nm='답변대기')and post_id like 'INQ%'
	]]>
	</select>

	<select id="getWaitClassCnt" resultType="int">
	<![CDATA[
		select count(clss_id) as "waitClassCnt"
		from clss
		where clss_cd=
		(select tpcd_id||cmcd_id
		from cmcd
		where cmcd_nm='접수중')
	]]>
	</select>

	<select id="getCompleteClassCnt" resultType="int">
	<![CDATA[
		select count(clss_id) as "completeClassCnt"
		from clss
		where clss_cd=
		(select tpcd_id||cmcd_id
		from cmcd
		where cmcd_nm='교육완료' and tpcd_id='GRP0002')
	]]>
	</select>

	<select id="getPostVOList" parameterType="string" 
	resultType="com.finalprj.kess.model.PostVO">
	<![CDATA[
		select
			post.post_id		as "postId",
			post.master_id		as "masterId",
			post.post_title		as "postTitle",
			post.post_content	as "postContent",
			post.post_hit		as "postHit",
			cmcd.cmcd_nm		as "postCd",
			post.rgst_dt		as "rgstDt",
			post.rgster_id		as "rgsterId",
			post.updt_dt		as "updtDt",
			post.updter_id		as "updterId"
		from post
		join cmcd on cmcd.tpcd_id||cmcd.cmcd_id = post.post_cd
		where post_id like CONCAT(#{postValue}, '%') and master_id is null
	]]>
	</select>
	
</mapper>